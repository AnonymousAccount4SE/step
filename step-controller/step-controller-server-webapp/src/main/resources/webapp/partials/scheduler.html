<div id="SchedulerCtrl" ng-controller="SchedulerCtrl">
	<st-table data="schedulerTasks" uid="'schedulerTaskList'" persist-state="true">
		<st-actions>
			<div class="btn-group btn-group-menu">
				<button type="button" ng-disabled="!authService.hasRight('task-write')" class="btn btn-success" ng-click="addSchedulerEntry()">New task</button>
			</div>
		</st-actions>
		<st-columns>
			<st-column name="attributes.name">
				<header>Name</header>
				<second-header><inputdropdown action="search" initial-value="initialValue"></inputdropdown></second-header>
			</st-column>
				<cell><span><entity-icon entity="row" entity-name="'parameter'"/> <a href="#" ng-click="$event.preventDefault();$parent.editTask(row.id)" ng-disabled="!authService.hasRight('task-write')" uib-tooltip="Edit">{{row.attributes.name}}</a></span></cell>
			<st-column name="executionsParameters.description">
				<header>Plan</header>
				<second-header><inputdropdown action="search" initial-value="initialValue"></inputdropdown></second-header>
				<cell><plan-link plan-ref="row.executionsParameters.repositoryObject" description="row.executionsParameters.description"/></cell>
			</st-column>
			<st-column name="executionsParameters.customParameters.env">
				<header>Environment</header>
				<second-header><inputdropdown action="search" initial-value="initialValue"></inputdropdown></second-header>
				<cell><span>{{row.executionsParameters.customParameters.env}}</span></cell>
				</st-column>
			<st-column name="cronExpression">
				<header>CRON Expression</header>
				<second-header><inputdropdown action="search" initial-value="initialValue"></inputdropdown></second-header>
				<cell><span>{{row.cronExpression}}</span></cell>
			</st-column>
			<st-column name="active">
				<header>Status</header>
				<second-header><inputdropdown action="search" initial-value="initialValue"></inputdropdown></second-header>
				<cell>
					<button type="button" class="btn btn-primary" ng-click="$parent.toggleTaskState(row.id, row.active)" ng-disabled="!authService.hasRight('task-write')" aria-pressed="false" autocomplete="off">{{row.active?'On':'Off'}}</button>
				</cell>
			</st-column>
			<st-column width="'150px'">
				<cell>
					<div class="btn-group btn-group-sm">
						<button type="button" class="btn btn-default" ng-click="$parent.executeTask(row)" ng-disabled="!authService.hasRight('plan-execute')"  uib-tooltip="Execute">
            				<span class="glyphicon glyphicon-play" aria-hidden="true"></span>
            			</button>
						<button type="button" class="btn btn-default" ng-click="$parent.editTask(row.id)" ng-disabled="!authService.hasRight('task-write')" uib-tooltip="Edit">
            				<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            			</button>
            			<button type="button" class="btn btn-default" ng-click="$parent.askAndDeleteTask(row.id, true)" ng-disabled="!authService.hasRight('task-write')" uib-tooltip="Delete">
            				<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            			</button>
          			</div>
          		</cell>
			</st-column>
		</st-columns>
	</st-table>
</div>